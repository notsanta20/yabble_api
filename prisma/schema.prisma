generator client {
  provider = "prisma-client-js"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("LOCAL_DATABASE_URL")
}

model User {
  id           String        @id @default(uuid())
  username     String
  email        String
  salt         String
  hash         String
  bio          String?
  profilePic   String?
  isActive     Boolean
  Posts        Posts[]
  Likes        Likes[]
  Comments     Comments[]
  userRequests Requests[]    @relation("userA")
  myRequests   Requests[]    @relation("userB")
  myFriends    FriendsList[] @relation("user")
  followers    FriendsList[] @relation("friend")
}

model Posts {
  id          String     @id @default(uuid())
  title       String
  description String?
  image       String?
  time        DateTime   @default(now())
  user        User       @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId      String
  Likes       Likes[]
  Comments    Comments[]
}

model Likes {
  id     String @id @default(uuid())
  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  postId String
  post   Posts  @relation(fields: [postId], references: [id], onDelete: Cascade)
}

model Comments {
  id      String   @id @default(uuid())
  comment String
  time    DateTime @default(now())
  userId  String
  user    User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  postId  String
  post    Posts    @relation(fields: [postId], references: [id], onDelete: Cascade)
}

model Requests {
  id      String @id @default(uuid())
  userAID String
  userA   User   @relation("userA", fields: [userAID], references: [id], onDelete: Cascade)
  userBID String
  userB   User   @relation("userB", fields: [userBID], references: [id], onDelete: Cascade)
}

model FriendsList {
  id      String @id @default(uuid())
  userAID String
  userA   User   @relation("user", fields: [userAID], references: [id], onDelete: Cascade)
  userBID String
  userB   User   @relation("friend", fields: [userBID], references: [id], onDelete: Cascade)
}

model Messages {
  id      String   @id @default(uuid())
  message String?
  image   String?
  time    DateTime @default(now())
}
